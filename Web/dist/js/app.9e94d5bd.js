(function(e){function t(t){for(var o,a,r=t[0],c=t[1],l=t[2],h=0,u=[];h<r.length;h++)a=r[h],i[a]&&u.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(u.length)u.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={app:0},s=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;s.push([1,"chunk-vendors"]),n()})({0:function(e,t){},1:function(e,t,n){e.exports=n("56d7")},"1abb":function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),_node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0__),_store_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c0d6"),flv_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1947");__webpack_exports__["a"]={store:_store_js__WEBPACK_IMPORTED_MODULE_1__["a"],created:function(){flv_js__WEBPACK_IMPORTED_MODULE_2__["a"].isSupported()&&(this.player=flv_js__WEBPACK_IMPORTED_MODULE_2__["a"].createPlayer({type:"flv",url:"http://101.34.101.58/live?port=9988&&app=live&&stream=test",isLive:!0}))},data:function(){return{dialogFormVisible:!1,player:null,playing:!1,screenWidth:0,screenHeight:0,websock:null,drawx:100,drawy:500,form:{ConnectionDetail:4,LocalIp:"192.168.51.198",AimIp:"101.34.101.58",UserType:0,UserName:"",UserCode:"17003",CLassCode:"5327",JsonType:4,JsonData:"登录到服务器",ContentSocket:null},countnum:0,pointObj:null,textarea:"",iscandraw:!1,flag:!1,x:0,y:0,pointArray:[],testjson:{ConnectionDetail:4,LocalIp:"192.168.51.198",AimIp:"192.168.51.198",UserType:0,UserName:123,UserCode:123,CLassCode:5327,JsonType:6,JsonData:"",ContentSocket:null},ChatArray:[],bgimg:"http://qwf43oqfq.hn-bkt.clouddn.com/%E6%A1%8C%E9%9D%A2%E5%A3%81%E7%BA%B8.jpg",imgObj:null,imgSrcRoot:"http://qwf43oqfq.hn-bkt.clouddn.com/",imgData:null,temp:null,pdfheight:0,pdfwidth:0,upPicture:null,nowPicture:null}},methods:{login:function(){this.dialogFormVisible=!1,this.initWebSocket()},clearcanvas:function(){var e=document.getElementById("mycanvas").getContext("2d");e.canvas.width=e.canvas.width},canvascopy:function(){var e=document.getElementById("mycanvas").getContext("2d"),t=e.canvas.width,n=e.canvas.height;this.imgData=e.getImageData(0,0,t,n);var o=_node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0___default()("<canvas>").attr("width",this.imgData.width).attr("height",this.imgData.height)[0];o.getContext("2d").putImageData(this.imgData,0,0),this.temp=o},canvaspaste:function(){var e=document.getElementById("mycanvas").getContext("2d"),t=e.canvas.width,n=e.canvas.height;e.scale(t/this.temp.width,n/this.temp.height),e.drawImage(this.temp,0,0),this.imgData=e.getImageData(0,0,t,n);var o=_node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0___default()("<canvas>").attr("width",this.imgData.width).attr("height",this.imgData.height)[0];o.getContext("2d").putImageData(this.imgData,0,0),e.canvas.width=t,e.canvas.height=n,e.drawImage(o,0,0),console.log(t+" + "+n)},revocation:function(){var e=document.getElementById("mycanvas").getContext("2d");e.canvas.width=e.canvas.width,this.canvaspaste()},loadImg:function(){var e=this,t=new Image;t.crossOrigin="Anonymous",t.src=this.imgSrcRoot+this.imgObj,console.log(444+t.src),t.onload=function(){var t=document.getElementById("mycanvas"),n=t.getContext("2d");this.width=t.width/2,this.height=t.height,console.log(this.width+"+"+this.height),n.drawImage(this,0,0,this.width,this.height),e.canvascopy()}},initCanvas:function(){console.log("initcanvas");var e=document.getElementById("mycanvas");e.getContext("2d");e.width=.75*window.innerWidth,e.height=.85*window.innerHeight,e.style.width=.75*window.innerWidth,e.style.height=.85*window.innerHeight},drawline:function(){var e=this;console.log("可以画了"),console.log(window.innerWidth);var t=document.getElementById("mycanvas"),n=t.getContext("2d"),o=t.width,i=t.height;t.onmousedown=function(t){e.pointArray=[];var s={},a=[],r=[],c=(t=t||window.event,t.clientX-.025*window.innerWidth),l=t.clientY-.11*window.innerHeight;n.moveTo(c,l),document.onmousemove=function(t){t=t||window.event;var r=t.clientX-.025*window.innerWidth,c=t.clientY-.11*window.innerHeight;s.X=parseFloat(e.BoradWidth-e.BoradWidth*(t.clientX-.025*window.innerWidth)/o).toFixed(4),s.Y=parseFloat(e.BoradHeight-e.BoradHeight*(t.clientY-.11*window.innerHeight)/i).toFixed(4),console.log(s.X+"+++"+s.Y),n.lineTo(r,c),n.stroke(),a.push(s),s={}},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null;for(var n=0;n<a.length;n++)r.push(a[n]),r.push(a[n+1]),e.pointArray.push(r),r=[];e.form.JsonType=7;var o=JSON.stringify(e.pointArray);e.form.JsonData=o,e.countnum++,e.canvascopy()}},console.log(1.1111111111111112e45),console.log(o),console.log(i);for(var s=0;s<this.pointObj.length;s++)n.moveTo(o-this.pointObj[s][0].X/this.BoradWidth*o,i-this.pointObj[s][0].Y/this.BoradHeight*i),n.lineTo(o-this.pointObj[s][1].X/this.BoradWidth*o,i-this.pointObj[s][1].Y/this.BoradHeight*i),n.strokeStyle="black",n.lineWidth=1.5,n.stroke()},sendMessage:function(){var e=this;if(null===this.textarea||""===this.textarea||" "===this.textarea)alert("别nm发空消息");else{e.form.JsonType=6,e.form.JsonData=e.textarea,e.textarea=null;var t=JSON.stringify(e.form);e.websocketsend(t)}},logout:function(){this.$router.push("/Login"),this.websock.close()},initWebSocket:function(){var e="ws://101.34.101.58:9999";this.websock=new WebSocket(e),this.websock.onopen=this.websocketonopen,this.websock.onmessage=this.websocketonmessage,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){var e=JSON.stringify(this.form);console.log(this.form),console.log(e),this.websocketsend(e)},websocketonerror:function(){alert("正在重新连接")},websocketonmessage:function websocketonmessage(e){var jsonObj=eval("("+e.data+")");if(console.log(jsonObj),console.log(jsonObj.JsonType),"false"==jsonObj.JsonData)alert("登陆失败");else if("true"==jsonObj.JsonData)alert("登陆成功"),this.BoradWidth=jsonObj.BoradWidth,this.BoradHeight=jsonObj.BoradHeight;else if(3==jsonObj.JsonType){console.log("这是画线！！"),this.canvascopy();var pointObj=eval("("+jsonObj.JsonData+")");this.pointObj=pointObj,this.BoradWidth=jsonObj.BoradWidth,this.BoradHeight=jsonObj.BoradHeight,console.log("这是手写版的宽高："+jsonObj.BoradWidth+jsonObj.BoradHeight)}else if(8==jsonObj.JsonType){console.log("这是pdf！！");var imgObj=jsonObj.JsonData;this.imgObj=imgObj,console.log(2333+this.imgObj)}else if(2==jsonObj.JsonType){console.log("这是消息！！");var count={};count.TeacherName=jsonObj.UserName,count.TeacherSay=jsonObj.JsonData,console.log(count),this.ChatArray.push(count)}else if(10==jsonObj.JsonType)console.log("这是撤销！！"),this.revocation();else if(9==jsonObj.JsonType){console.log("这是清空花板！！");var c=document.getElementById("mycanvas");c.height=c.height}},websocketsend:function(e){console.log(111+e),console.log("这是数据长度"+e.length),this.websock.send(e)},websocketclose:function(e){console.log("断开连接",e)}},mounted:function(){if(flv_js__WEBPACK_IMPORTED_MODULE_2__["a"].isSupported()){var e=document.getElementById("myvideo"),t=flv_js__WEBPACK_IMPORTED_MODULE_2__["a"].createPlayer({type:"flv",url:"http://101.34.101.58/live?port=9988&&app=live&&stream=test",isLive:!0,fluid:!0},{enableStashBuffer:!1,fixAudioTimestampGap:!1,isLive:!0});t.attachMediaElement(e),t.load(),t.play()}var n=this;window.onresize=function(){n.screenWidth=document.documentElement.clientWidth,n.screenHeight=document.documentElement.clientHeight,console.log(document.documentElement.clientWidth),console.log(document.documentElement.clientWidth)},this.initCanvas(),this.drawline()},computed:{getuserCode:function(){return this.$store.state.userCode},getclassCode:function(){return this.$store.state.classCode}},watch:{pointObj:{deep:!0,handler:function(e,t){this.drawline()}},countnum:{deep:!0,handler:function(e,t){var n=JSON.stringify(this.form);this.websocketsend(n),this.drawline()}},imgObj:{deep:!0,handler:function(e,t){this.loadImg()}},screenWidth:function(e){console.log(123456),console.log(this.imgData);var t=document.getElementById("mycanvas");t.getContext("2d");t.width=.75*window.innerWidth,t.height=.85*window.innerHeight,t.style.width=.75*window.innerWidth,t.style.height=.85*window.innerHeight,console.log(window.innerWidth),this.canvaspaste()},screenHeight:function(){console.log(123456);var e=document.getElementById("mycanvas");e.getContext("2d");e.width=.75*window.innerWidth,e.height=.85*window.innerHeight,e.style.width=.75*window.innerWidth,e.style.height=.85*window.innerHeight,this.canvaspaste()}}}},2:function(e,t){},3:function(e,t){},3033:function(e,t,n){"use strict";var o=n("8851"),i=n.n(o);i.a},4:function(e,t){},4029:function(e,t,n){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"all"},[n("el-header",{attrs:{height:"10%"}},[n("div",{staticStyle:{"margin-left":"10px","font-size":"20px","letter-spacing":"2px"}},[e._v("金奥手写板直播平台")]),n("div",{staticStyle:{"margin-right":"30px"}},[e._v("帮助")])]),n("el-main",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",staticStyle:{height:"50px","line-height":"50px"},attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{"font-size":"25px","font-weight":"bold"}},[e._v("学生登录")])]),n("div",{staticStyle:{"text-align":"center"}},[n("el-input",{staticStyle:{width:"85%","margin-top":"10%"},attrs:{"prefix-icon":"iconfont icon-yonghu",placeholder:"请输入学号"},model:{value:e.form.UserCode,callback:function(t){e.$set(e.form,"UserCode",t)},expression:"form.UserCode"}}),n("el-input",{staticStyle:{width:"85%","margin-top":"5%"},attrs:{"prefix-icon":"iconfont icon-banjiguanli",placeholder:"请输入班级号"},model:{value:e.form.CLassCode,callback:function(t){e.$set(e.form,"CLassCode",t)},expression:"form.CLassCode"}}),n("el-button",{staticStyle:{width:"85%","margin-top":"15%",height:"50px"},attrs:{type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")])],1)])],1),n("el-footer",{attrs:{height:"20%"}},[n("div",{staticStyle:{"font-size":"13px"}},[e._v("\n\t\t\t隐私政策\n\t\t"),n("el-divider",{attrs:{direction:"vertical"}}),e._v("\n\t\t\t儿童隐私政策\n\t\t"),n("el-divider",{attrs:{direction:"vertical"}}),e._v("\n\t\t\t家长须知\n\t  ")],1)])],1)},r=[],c=n("9119"),l=c["a"],d=(n("784d"),n("2877")),h=Object(d["a"])(l,a,r,!1,null,"d641781a",null),u=h.exports,_={},g=_,p=Object(d["a"])(g,i,s,!1,null,null,null),m=p.exports,f=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"all"},[n("el-button-group",[n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",size:"mini"},on:{click:e.prePage}},[e._v("上一页")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.nextPage}},[e._v("下一页"),n("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1),n("div",{staticStyle:{marginTop:"10px",color:"#409EFF"}},[e._v(e._s(e.pageNum)+" / "+e._s(e.pageTotalNum))]),n("pdf",{attrs:{page:e.pageNum,src:e.url},on:{progress:function(t){e.loadedRatio=t},"num-pages":function(t){e.pageTotalNum=t}}})],1)},w=[],b=n("858e"),y={name:"Pdf",components:{pdf:b["a"]},data:function(){return{url:"/test.pdf",pageNum:1,pageTotalNum:1,loadedRatio:0}},methods:{prePage:function(){var e=this.pageNum;e=e>1?e-1:this.pageTotalNum,this.pageNum=e},nextPage:function(){var e=this.pageNum;e=e<this.pageTotalNum?e+1:1,this.pageNum=e}}},j=y,C=(n("ca54"),Object(d["a"])(j,v,w,!1,null,"28b8a464",null)),O=C.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%",width:"100%"}},[n("el-header",{attrs:{height:"7%"}},[n("div",[n("span",[e._v("金奥绘画教学平台")])]),n("el-button",{attrs:{type:"infor"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("登录")]),n("el-button",{attrs:{type:"infor"}},[e._v("退出")])],1),n("el-container",{staticStyle:{height:"93%"}},[n("el-aside",{attrs:{width:"80%"}},[n("div",{staticStyle:{width:"95%",height:"90%",margin:"auto","text-align":"center",transform:"translateY(5%)"},attrs:{id:"canv"}},[n("canvas",{staticStyle:{"background-color":"white"},attrs:{id:"mycanvas",width:"400",height:"400"}})])]),n("el-container",[n("el-main",{staticStyle:{height:"20%"}},[n("div",{staticStyle:{height:"100%",width:"100%","text-align":"center",padding:"0"}},[n("video",{staticStyle:{width:"200px",height:"95%"},attrs:{id:"myvideo"}})])]),n("el-footer",{staticClass:"messagefooter",staticStyle:{"background-color":"#005C5F",padding:"5%"},attrs:{height:"70%"}},[n("div",{staticClass:"messagediv",staticStyle:{"background-color":"white","border-radius":"2%"}},[n("el-card",{staticClass:"box-card",staticStyle:{"background-color":"white"}},e._l(e.ChatArray,function(t){return n("div",{key:t,staticClass:"text item"},[e._v("\n\t\t\t\t\t\t"+e._s(t.TeacherName)+":"+e._s(t.TeacherSay)+"\n\t\t\t\t\t\t"),n("el-divider")],1)}),0)],1)]),n("el-footer",{staticStyle:{"background-color":"#ffa502",padding:"5%"},attrs:{height:"10%"}},[n("div",{staticStyle:{height:"100%"}},[n("el-input",{staticStyle:{width:"70%"},attrs:{type:"text",size:"medium",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),n("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:e.sendMessage}})],1)])],1)],1),n("el-dialog",{attrs:{title:"学生登陆",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("div",{staticStyle:{"text-align":"center"}},[n("el-input",{staticStyle:{width:"85%","margin-top":"10%"},attrs:{"prefix-icon":"iconfont icon-yonghu",placeholder:"请输入学号"},model:{value:e.form.UserCode,callback:function(t){e.$set(e.form,"UserCode",t)},expression:"form.UserCode"}}),n("el-input",{staticStyle:{width:"85%","margin-top":"5%"},attrs:{"prefix-icon":"iconfont icon-banjiguanli",placeholder:"请输入班级号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.form.CLassCode,callback:function(t){e.$set(e.form,"CLassCode",t)},expression:"form.CLassCode"}}),n("el-button",{staticStyle:{width:"85%","margin-top":"15%",height:"50px"},attrs:{type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")])],1)])],1)},E=[],x=n("1abb"),D=x["a"],S=(n("3033"),Object(d["a"])(D,k,E,!1,null,"a041dc82",null)),W=S.exports;o["default"].use(f["a"]);var T=new f["a"]({routes:[{path:"/",redirect:"/Watch"},{path:"/Login",component:u,redirect:"/Login",children:[{path:"/Login",component:u}]},{path:"/Test",component:O,redirect:"/Test",children:[{path:"/Test",component:O}]},{path:"/Watch",component:W,redirect:"/Watch",children:[{path:"/Watch",component:W}]}]}),B=T,P=(n("aede"),n("5c96")),I=n.n(P);n("0fae");o["default"].use(I.a);n("ed2c");var M=n("8ded"),L=n.n(M);o["default"].config.productionTip=!1,new o["default"]({store:L.a,router:B,render:function(e){return e(m)}}).$mount("#app")},6:function(e,t){},"784d":function(e,t,n){"use strict";var o=n("8bb5"),i=n.n(o);i.a},8851:function(e,t,n){},"8bb5":function(e,t,n){},9119:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),_node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_jquery_dist_jquery_js__WEBPACK_IMPORTED_MODULE_0__),_store_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c0d6");__webpack_exports__["a"]={store:_store_js__WEBPACK_IMPORTED_MODULE_1__["a"],created:function(){},data:function(){return{form:{ConnectionDetail:4,LocalIp:"192.168.51.198",AimIp:"101.34.101.58",UserType:0,UserName:"",UserCode:"",CLassCode:"",JsonType:4,JsonData:"登录到服务器",ContentSocket:null}}},methods:{login:function(){null==this.form.UserCode||""==this.form.UserCode||null==this.form.CLassCode||""==this.form.CLassCode?this.$message({message:"输入不能为空哦",type:"warning"}):this.initWebSocket()},initWebSocket:function(){var e="ws://192.168.51.198:9999";this.websock=new WebSocket(e),this.websock.onopen=this.websocketonopen,this.websock.onmessage=this.websocketonmessage,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){var e=JSON.stringify(this.form);console.log(this.form),console.log(e),this.websocketsend(e)},websocketonerror:function(){},websocketonmessage:function websocketonmessage(e){var jsonObj=eval("("+e.data+")");if(console.log(jsonObj),console.log(jsonObj.JsonData),"false"==jsonObj.JsonData)this.$message.error("登陆失败");else{var that=this;this.$store.commit("getuserCode",this.form.UserCode),this.$store.commit("getclassCode",this.form.CLassCode),that.$router.push("Watch"),this.websock.onclose=function(e){console.log("关闭")}}},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){console.log("断开连接",e)}},mounted:function(){}}},aede:function(e,t,n){},c0d6:function(e,t,n){"use strict";var o=n("2b0e"),i=n("2f62");o["default"].use(i["a"]),t["a"]=new i["a"].Store({state:{userCode:null,classCode:null},getters:{},mutations:{getuserCode:function(e,t){e.userCode=t},getclassCode:function(e,t){e.classCode=t}},actions:{}})},ca54:function(e,t,n){"use strict";var o=n("4029"),i=n.n(o);i.a},ed2c:function(e,t,n){}});
//# sourceMappingURL=app.9e94d5bd.js.map